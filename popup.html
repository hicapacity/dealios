<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Dealios</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="css/style.css" media="screen">

  <body>
    <div id="container">
      <header>

      </header>
      <div id="main" role="main"> 
          <h1 id="deal_title">Dealios</h1>
          <div id="deals"></div>
      </div>
      <footer>

      </footer>
    </div> <!--! end of #container -->
  </body>
  
  <script>
    // TODO: Need to store feed in localstorage. Probably only update once or so
    //       times a day. Also need to write helper funcs. Too lazy :D
    var bkg = chrome.extension.getBackgroundPage(); 
    bkg.init();
    
    var user_city_feed_obj = bkg.get_user_city_feed_obj();
    var city_display = user_city_feed_obj.city_display;
    var deal_title = document.getElementById('deal_title');
    deal_title.appendChild(document.createTextNode(' in ' + city_display));
    
    var deals_el = document.getElementById('deals');
    bkg.add_deals_to_element(deals_el);
    chrome.browserAction.setIcon({"path" : "images/dealios22gray.png"});
  </script>
</head>
</html>
